{% if element is empty %}
  {% set element = header %}
{% endif %}

{% set _shareButtons %}
  {% if shareButtons %}
    <div class="flex flex-wrap my-5 sm:my-6 md:my-8 lg:my-10">
      <div class="mr-3 uppercase">Share</div>
      <div>{{ shareButtons }}</div>
    </div>
  {% endif %}
{% endset %}

{% set contentGroup1 %}
  {% if element != 'header' and primaryCategory %}
    <div class="mb-3 text-sm uppercase">
      {% if primaryCategory.url %}
        <a href="{{ primaryCategory.url }}">{{ primaryCategory.title }}</a>
      {% else %}
        {{ primaryCategory.title }}
      {% endif %}
    </div>
  {% endif %}
  
  <h1 class="text-4xl font-bold md:text-5xl">{{ title }}</h1>

  {% if (primaryCategory and element == 'header') or lengthOfRead %}
    <div class="flex flex-col mt-4 uppercase sm:block">{% apply spaceless %}
      {% if primaryCategory and element == 'header' %}
        <span class="{{ lengthOfRead ? 'mr-2 sm:after:content-pipe sm:after:ml-2' }}">
          {% if primaryCategory.url %}
            <a href="{{ primaryCategory.url }}">{{ primaryCategory.title }}</a>
          {% else %}
            {{ primaryCategory.title }}
          {% endif %}
        </span>
      {% endif %}
      {% if lengthOfRead %}<span>{{ lengthOfRead }}</span>{% endif %}
    {% endapply %}
    </div>
  {% endif %}

  {% if summary %}
    <p class="text-xl lg:text-2xl xl:text-3xl mt-4 sm:mt-8 {{ (orientation == 'landscape' and element == 'header') ? 'max-w-2xl mx-auto' }}">{{ summary }}</p>
  {% endif %}

  {% if link %}
    <div class="mt-16">
      <a href="{{ link.url }}" class="px-10 py-2 text-sm text-white uppercase transition-colors bg-black rounded-lg hover:bg-gray-800">{{ link.title }}</a>
    </div>
  {% endif %}
  
{% endset %}

{% set contentGroup2 %}
  {% if shareButtons and not shareButtonsLast %}
    {{ _shareButtons }}
  {% endif %}

  <div class="mt-4 sm:mt-8">
    {% if author or photoCredit or videoCredit %}
      <div class="flex flex-col sm:block">{% apply spaceless %}
        {% if author %}
          <span class="{{ photoCredit ? 'sm:mr-2 sm:after:content-pipe sm:after:ml-2' }}">By {{ author }}</span>
        {% endif %}
        {% if photoCredit %}
          <span class="{{ videoCredit ? 'sm:mr-2 sm:after:content-pipe sm:after:ml-2' }}">{{ photoCredit }}</span>
        {% endif %}
        {% if videoCredit %}
          <span>Videography by {{ videoCredit }}</span>
        {% endif %}
      {% endapply %}</div>
    {% endif %}

    {% if contact and contact.name %}
      <address class="flex flex-col mt-4 not-italic">
        <span>Contact: {{ contact.name }}{% if contact.email %}
          (<a href="mailto:{{ contact.email }}">{{ contact.email }}</a>){# assuming link for email? #}
        {% endif %}</span>
        {% if contact.phone %}
          <span>{{ contact.phone }}</span>{# link or just text for phone? #}
        {% endif %}
      </address>
    {% endif %}
  </div>

  {% if postedDate or updatedDate %}
    <div class="mt-2 text-sm">{% apply spaceless %}
      {% if postedDate %}
        <span class="{{ updatedDate ? 'mr-3' }}">{{ postedDate }}</span>
      {% endif %}
      {% if updatedDate %}<span><span class="mr-1 text-xs uppercase">Updated </span>{{ updatedDate }}</span>{% endif %}
    {% endapply %}
    </div>
  {% endif %}
  
  
  {% if shareButtons and shareButtonsLast %}
    {{ _shareButtons }}
  {% endif %}
{% endset %}

{% if orientation == 'portrait' %}
  <{{ element }} class="
    flex flex-col space-y-8
    md:flex-row md:space-y-0 md:space-x-16 md:justify-center md:items-center
    {{ element == 'header' ? 'md:-mx-container-gutter' }}
  ">
    <div class="
      {{ element != 'header' ? 'md:max-w-1/2 md:min-w-[50%]' : 'md:w-screen' }}
      -mx-container-gutter md:mx-0 md:self-stretch
      descendant-figcaption:mx-page-padding md:descendant-figcaption:mr-0
      descendant-img:h-auto
    ">{{ figure }}</div>
    <div class="{{ element == 'header' ? 'md:pr-container-gutter' }}">{{ contentGroup1 }}{{ element == 'header' ? contentGroup2 }}</div>
  </{{ element }}>
{% elseif element != 'header' %}
  <{{ element }} class="flex flex-col space-y-6 xl:flex-row-reverse xl:space-y-0 xl:space-x-reverse xl:space-x-16 xl:justify-center xl:items-center xl:-mx-container-gutter">
    <div class=" -mx-container-gutter xl:mx-0 xl:self-stretch descendant-img:h-auto">{{ figure }}</div>
    <div class="xl:pl-page-padding">{{ contentGroup1 }}</div>
  </{{ element }}>
{% else %}
  <{{ element }}>
    <div class="text-center">{{ contentGroup1 }}</div>
    <div class="mt-8 -mx-container-gutter md:mx-0 descendant-figcaption:mx-page-padding md:descendant-figcaption:mx-0 descendant-img:h-auto">{{ figure }}</div>
    <div>{{ contentGroup2 }}</div>
  </{{ element }}>
{% endif %}